{"ast":null,"code":"var _jsxFileName = \"/Users/antontintul/WebstormProjects/bank-dz/src/features/FormView/index.js\",\n    _s = $RefreshSig$();\n\nimport './index.css';\nimport { Input } from \"../../components/BasicInput\";\nimport { useState } from \"react\";\nimport { Select } from \"../../components/BasicSelect\";\nimport { Button } from \"../../components/BasicButton\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Form = props => {\n  _s();\n\n  const {\n    list,\n    setList,\n    options,\n    type,\n    action\n  } = props;\n  let defaultName = '';\n  let defaultSelectedManager = '';\n  let defaultReason = '';\n  let id = -1;\n\n  if (action === 'change') {\n    let searchParams = new URLSearchParams(window.location.search);\n    id = parseInt(searchParams.get('id'));\n    defaultName = list[id].name;\n    defaultSelectedManager = list[id].shelfId;\n    defaultReason = list[id].description;\n  }\n\n  const [name, setName] = useState(defaultName);\n  const [selectedShelf, setSelectedShelf] = useState(defaultSelectedManager);\n  const [reason, setReason] = useState(defaultReason);\n\n  const onChangeSelect = event => {\n    setSelectedShelf(event.target.value);\n  };\n\n  const onChangeReason = event => {\n    setReason(event.target.value);\n  };\n\n  const onChangeName = event => {\n    setName(event.target.value);\n  };\n\n  const onSubmitForm = event => {\n    event.preventDefault();\n    const array = list.map(value => {\n      return value;\n    });\n\n    if (action === 'change') {\n      array.map((value, index) => {\n        if (id !== -1 && index === id) {\n          value.name = name;\n          value.shelfId = Number(selectedShelf);\n          value.description = reason;\n        }\n\n        return value;\n      });\n    } else {\n      array.push({\n        shelfId: Number(selectedShelf),\n        name: name,\n        description: reason\n      });\n    }\n\n    if (action !== 'change') {\n      setList(array, 'add');\n    } else {\n      setList(array);\n    }\n\n    if (action !== 'change') {\n      setName('');\n      setSelectedShelf('');\n      setReason('');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmitForm,\n    children: [/*#__PURE__*/_jsxDEV(Input, {\n      title: \"Имя\",\n      value: name,\n      onChange: onChangeName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), type !== 'goods' && /*#__PURE__*/_jsxDEV(Input, {\n      value: reason,\n      title: \"Назначение стеллажа\",\n      onChange: onChangeReason\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }, this), type === 'goods' && action === 'change' && /*#__PURE__*/_jsxDEV(Select, {\n      title: \"\\u0421\\u0442\\u0435\\u043B\\u043B\\u0430\\u0436\",\n      value: selectedShelf,\n      options: options.map(value => {\n        return value.name;\n      }),\n      placeholder: \"Выбери стеллаж\",\n      onChange: onChangeSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: 'Form-Submit',\n      submit: true,\n      type: \"action\",\n      children: action === 'change' ? 'Изменить' : 'Добавить'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        className: 'Form-Back',\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Form, \"3qZCCjC6hmVboPFmaeGk+XgyK6A=\");\n\n_c = Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/antontintul/WebstormProjects/bank-dz/src/features/FormView/index.js"],"names":["Input","useState","Select","Button","Link","Form","props","list","setList","options","type","action","defaultName","defaultSelectedManager","defaultReason","id","searchParams","URLSearchParams","window","location","search","parseInt","get","name","shelfId","description","setName","selectedShelf","setSelectedShelf","reason","setReason","onChangeSelect","event","target","value","onChangeReason","onChangeName","onSubmitForm","preventDefault","array","map","index","Number","push"],"mappings":"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","sourcesContent":["import './index.css';\nimport {Input} from \"../../components/BasicInput\";\nimport {useState} from \"react\";\nimport {Select} from \"../../components/BasicSelect\";\nimport {Button} from \"../../components/BasicButton\";\nimport {Link} from \"react-router-dom\";\n\nexport const Form = (props) => {\n    const {\n        list,\n        setList,\n        options,\n        type,\n        action\n    } = props;\n    let defaultName = '';\n    let defaultSelectedManager = '';\n    let defaultReason = '';\n    let id = -1;\n    if (action === 'change') {\n        let searchParams = new URLSearchParams(window.location.search);\n        id = parseInt(searchParams.get('id'));\n        defaultName = list[id].name;\n        defaultSelectedManager = list[id].shelfId;\n        defaultReason = list[id].description;\n    }\n\n    const [name, setName] = useState(defaultName);\n    const [selectedShelf, setSelectedShelf] = useState(defaultSelectedManager);\n    const [reason, setReason] = useState(defaultReason);\n\n    const onChangeSelect = (event) => {\n        setSelectedShelf(event.target.value);\n    };\n\n    const onChangeReason = (event) => {\n        setReason(event.target.value);\n    };\n\n    const onChangeName = (event) => {\n        setName(event.target.value);\n    }\n\n    const onSubmitForm = (event) => {\n        event.preventDefault();\n        const array = list.map((value) => {\n            return value;\n        });\n\n        if (action === 'change') {\n            array.map((value, index) => {\n                if (id !== -1 && index === id) {\n                    value.name = name;\n                    value.shelfId = Number(selectedShelf);\n                    value.description = reason\n                }\n                return value;\n            })\n        } else {\n            array.push({\n                shelfId: Number(selectedShelf),\n                name: name,\n                description: reason,\n            });\n        }\n\n        if (action !== 'change') {\n            setList(array, 'add');\n        } else {\n            setList(array);\n        }\n\n        if (action !== 'change') {\n            setName('');\n            setSelectedShelf('');\n            setReason('');\n        }\n    };\n\n    return (\n        <form onSubmit={onSubmitForm}>\n            <Input\n                title={\"Имя\"}\n                value={name}\n                onChange={onChangeName}\n            />\n            { type !== 'goods' && (\n                <Input\n                    value={reason}\n                    title={\"Назначение стеллажа\"}\n                    onChange={onChangeReason}\n                />\n            )}\n            { type === 'goods' && action === 'change' && (\n                <Select\n                    title=\"Стеллаж\"\n                    value={selectedShelf}\n                    options={options.map((value) => {\n                        return value.name;\n                    })}\n                    placeholder={\"Выбери стеллаж\"}\n                    onChange={onChangeSelect}\n                />\n            )}\n            <Button className={'Form-Submit'} submit={true} type=\"action\">{(action === 'change') ? 'Изменить' : 'Добавить'}</Button>\n            <Link to={\"/\"}><Button className={'Form-Back'}>Назад</Button></Link>\n        </form>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}