{"ast":null,"code":"var _jsxFileName = \"/Users/antontintul/WebstormProjects/bank-dz/src/features/FormView/index.js\",\n    _s = $RefreshSig$();\n\nimport './index.css';\nimport { Input } from \"../../components/BasicInput\";\nimport { useState } from \"react\";\nimport { Select } from \"../../components/BasicSelect\";\nimport { Button } from \"../../components/BasicButton\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Form = props => {\n  _s();\n\n  const {\n    list,\n    setList,\n    options,\n    type,\n    action\n  } = props;\n  let defaultName = '';\n  let defaultSelectedManager = '';\n  let defaultReason = '';\n  let id = -1;\n\n  if (action === 'change') {\n    let searchParams = new URLSearchParams(window.location.search);\n    id = parseInt(searchParams.get('id'));\n    defaultName = list[id].name;\n    defaultSelectedManager = list[id].shelfId;\n    defaultReason = list[id].description;\n  }\n\n  const [name, setName] = useState(defaultName);\n  const [selectedManager, setSelectedManager] = useState(defaultSelectedManager);\n  const [reason, setReason] = useState(defaultReason);\n  const [formStatus, setFormStatus] = useState('');\n\n  const onChangeSelect = event => {\n    setSelectedManager(event.target.value);\n  };\n\n  const onChangeReason = event => {\n    setReason(event.target.value);\n  };\n\n  const onChangeName = event => {\n    setName(event.target.value);\n  };\n\n  const onSubmitForm = event => {\n    event.preventDefault();\n\n    if (type === \"clients\") {\n      if (!name || !selectedManager || !reason) {\n        setFormStatus('alert');\n        return;\n      }\n    } else {\n      if (!name) {\n        setFormStatus('alert');\n        return;\n      }\n    }\n\n    const array = list.map(value => {\n      return value;\n    });\n\n    if (action === 'change') {\n      array.map((value, index) => {\n        if (id !== -1 && index === id) {\n          value.name = name;\n          value.shelfId = Number(selectedManager);\n          value.description = reason;\n        }\n\n        return value;\n      });\n    } else {\n      array.push({\n        shelfId: Number(selectedManager),\n        name: name,\n        description: reason\n      });\n    }\n\n    if (action !== 'change') {\n      setList(array, 'add');\n    } else {\n      setList(array);\n    }\n\n    setFormStatus('success');\n\n    if (action !== 'change') {\n      setName('');\n      setSelectedManager('');\n      setReason('');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmitForm,\n    children: [/*#__PURE__*/_jsxDEV(Input, {\n      title: \"Имя\",\n      value: name,\n      onChange: onChangeName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      value: reason,\n      title: \"Назначение товара\",\n      onChange: onChangeReason\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), type === 'clients' && /*#__PURE__*/_jsxDEV(Select, {\n      title: \"\\u041C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440 \\u0434\\u043B\\u044F \\u043E\\u0431\\u0437\\u0432\\u043E\\u043D\\u0430\",\n      value: selectedManager,\n      options: options.map(value => {\n        return value.name;\n      }),\n      placeholder: \"Выбери имя\",\n      onChange: onChangeSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: 'Form-Submit',\n      submit: true,\n      type: \"action\",\n      children: action === 'change' ? 'Изменить' : 'Добавить'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        className: 'Form-Back',\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Form, \"5MZZp+onX+ZqIXCi6+WrsUKRp68=\");\n\n_c = Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/antontintul/WebstormProjects/bank-dz/src/features/FormView/index.js"],"names":["Input","useState","Select","Button","Link","Form","props","list","setList","options","type","action","defaultName","defaultSelectedManager","defaultReason","id","searchParams","URLSearchParams","window","location","search","parseInt","get","name","shelfId","description","setName","selectedManager","setSelectedManager","reason","setReason","formStatus","setFormStatus","onChangeSelect","event","target","value","onChangeReason","onChangeName","onSubmitForm","preventDefault","array","map","index","Number","push"],"mappings":";;;AAAA,OAAO,aAAP;AACA,SAAQA,KAAR,QAAoB,6BAApB;AACA,SAAQC,QAAR,QAAuB,OAAvB;AACA,SAAQC,MAAR,QAAqB,8BAArB;AACA,SAAQC,MAAR,QAAqB,8BAArB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;;AAEA,OAAO,MAAMC,IAAI,GAAIC,KAAD,IAAW;AAAA;;AAC3B,QAAM;AACFC,IAAAA,IADE;AAEFC,IAAAA,OAFE;AAGFC,IAAAA,OAHE;AAIFC,IAAAA,IAJE;AAKFC,IAAAA;AALE,MAMFL,KANJ;AAOA,MAAIM,WAAW,GAAG,EAAlB;AACA,MAAIC,sBAAsB,GAAG,EAA7B;AACA,MAAIC,aAAa,GAAG,EAApB;AACA,MAAIC,EAAE,GAAG,CAAC,CAAV;;AACA,MAAIJ,MAAM,KAAK,QAAf,EAAyB;AACrB,QAAIK,YAAY,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAnB;AACAL,IAAAA,EAAE,GAAGM,QAAQ,CAACL,YAAY,CAACM,GAAb,CAAiB,IAAjB,CAAD,CAAb;AACAV,IAAAA,WAAW,GAAGL,IAAI,CAACQ,EAAD,CAAJ,CAASQ,IAAvB;AACAV,IAAAA,sBAAsB,GAAGN,IAAI,CAACQ,EAAD,CAAJ,CAASS,OAAlC;AACAV,IAAAA,aAAa,GAAGP,IAAI,CAACQ,EAAD,CAAJ,CAASU,WAAzB;AACH;;AAED,QAAM,CAACF,IAAD,EAAOG,OAAP,IAAkBzB,QAAQ,CAACW,WAAD,CAAhC;AACA,QAAM,CAACe,eAAD,EAAkBC,kBAAlB,IAAwC3B,QAAQ,CAACY,sBAAD,CAAtD;AACA,QAAM,CAACgB,MAAD,EAASC,SAAT,IAAsB7B,QAAQ,CAACa,aAAD,CAApC;AACA,QAAM,CAACiB,UAAD,EAAaC,aAAb,IAA8B/B,QAAQ,CAAC,EAAD,CAA5C;;AAGA,QAAMgC,cAAc,GAAIC,KAAD,IAAW;AAC9BN,IAAAA,kBAAkB,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAlB;AACH,GAFD;;AAIA,QAAMC,cAAc,GAAIH,KAAD,IAAW;AAC9BJ,IAAAA,SAAS,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAT;AACH,GAFD;;AAIA,QAAME,YAAY,GAAIJ,KAAD,IAAW;AAC5BR,IAAAA,OAAO,CAACQ,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAP;AACH,GAFD;;AAIA,QAAMG,YAAY,GAAIL,KAAD,IAAW;AAC5BA,IAAAA,KAAK,CAACM,cAAN;;AACA,QAAI9B,IAAI,KAAK,SAAb,EAAwB;AACpB,UAAI,CAACa,IAAD,IAAS,CAACI,eAAV,IAA6B,CAACE,MAAlC,EAA0C;AACtCG,QAAAA,aAAa,CAAC,OAAD,CAAb;AACA;AACH;AACJ,KALD,MAKO;AACH,UAAI,CAACT,IAAL,EAAW;AACPS,QAAAA,aAAa,CAAC,OAAD,CAAb;AACA;AACH;AACJ;;AACD,UAAMS,KAAK,GAAGlC,IAAI,CAACmC,GAAL,CAAUN,KAAD,IAAW;AAC9B,aAAOA,KAAP;AACH,KAFa,CAAd;;AAIA,QAAIzB,MAAM,KAAK,QAAf,EAAyB;AACrB8B,MAAAA,KAAK,CAACC,GAAN,CAAU,CAACN,KAAD,EAAQO,KAAR,KAAkB;AACxB,YAAI5B,EAAE,KAAK,CAAC,CAAR,IAAa4B,KAAK,KAAK5B,EAA3B,EAA+B;AAC3BqB,UAAAA,KAAK,CAACb,IAAN,GAAaA,IAAb;AACAa,UAAAA,KAAK,CAACZ,OAAN,GAAgBoB,MAAM,CAACjB,eAAD,CAAtB;AACAS,UAAAA,KAAK,CAACX,WAAN,GAAoBI,MAApB;AACH;;AACD,eAAOO,KAAP;AACH,OAPD;AAQH,KATD,MASO;AACHK,MAAAA,KAAK,CAACI,IAAN,CAAW;AACPrB,QAAAA,OAAO,EAAEoB,MAAM,CAACjB,eAAD,CADR;AAEPJ,QAAAA,IAAI,EAAEA,IAFC;AAGPE,QAAAA,WAAW,EAAEI;AAHN,OAAX;AAKH;;AAED,QAAIlB,MAAM,KAAK,QAAf,EAAyB;AACrBH,MAAAA,OAAO,CAACiC,KAAD,EAAQ,KAAR,CAAP;AACH,KAFD,MAEO;AACHjC,MAAAA,OAAO,CAACiC,KAAD,CAAP;AACH;;AAEDT,IAAAA,aAAa,CAAC,SAAD,CAAb;;AACA,QAAIrB,MAAM,KAAK,QAAf,EAAyB;AACrBe,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAE,MAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAE,MAAAA,SAAS,CAAC,EAAD,CAAT;AACH;AACJ,GA9CD;;AAgDA,sBACI;AAAM,IAAA,QAAQ,EAAES,YAAhB;AAAA,4BACI,QAAC,KAAD;AACI,MAAA,KAAK,EAAE,KADX;AAEI,MAAA,KAAK,EAAEhB,IAFX;AAGI,MAAA,QAAQ,EAAEe;AAHd;AAAA;AAAA;AAAA;AAAA,YADJ,eAMI,QAAC,KAAD;AACI,MAAA,KAAK,EAAET,MADX;AAEI,MAAA,KAAK,EAAE,mBAFX;AAGI,MAAA,QAAQ,EAAEQ;AAHd;AAAA;AAAA;AAAA;AAAA,YANJ,EAWM3B,IAAI,KAAK,SAAT,iBACE,QAAC,MAAD;AACI,MAAA,KAAK,EAAC,gHADV;AAEI,MAAA,KAAK,EAAEiB,eAFX;AAGI,MAAA,OAAO,EAAElB,OAAO,CAACiC,GAAR,CAAaN,KAAD,IAAW;AAC5B,eAAOA,KAAK,CAACb,IAAb;AACH,OAFQ,CAHb;AAMI,MAAA,WAAW,EAAE,YANjB;AAOI,MAAA,QAAQ,EAAEU;AAPd;AAAA;AAAA;AAAA;AAAA,YAZR,eAsBI,QAAC,MAAD;AAAQ,MAAA,SAAS,EAAE,aAAnB;AAAkC,MAAA,MAAM,EAAE,IAA1C;AAAgD,MAAA,IAAI,EAAC,QAArD;AAAA,gBAAgEtB,MAAM,KAAK,QAAZ,GAAwB,UAAxB,GAAqC;AAApG;AAAA;AAAA;AAAA;AAAA,YAtBJ,eAuBI,QAAC,IAAD;AAAM,MAAA,EAAE,EAAE,GAAV;AAAA,6BAAe,QAAC,MAAD;AAAQ,QAAA,SAAS,EAAE,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAf;AAAA;AAAA;AAAA;AAAA,YAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA2BH,CAjHM;;GAAMN,I;;KAAAA,I","sourcesContent":["import './index.css';\nimport {Input} from \"../../components/BasicInput\";\nimport {useState} from \"react\";\nimport {Select} from \"../../components/BasicSelect\";\nimport {Button} from \"../../components/BasicButton\";\nimport {Link} from \"react-router-dom\";\n\nexport const Form = (props) => {\n    const {\n        list,\n        setList,\n        options,\n        type,\n        action\n    } = props;\n    let defaultName = '';\n    let defaultSelectedManager = '';\n    let defaultReason = '';\n    let id = -1;\n    if (action === 'change') {\n        let searchParams = new URLSearchParams(window.location.search);\n        id = parseInt(searchParams.get('id'));\n        defaultName = list[id].name;\n        defaultSelectedManager = list[id].shelfId;\n        defaultReason = list[id].description;\n    }\n\n    const [name, setName] = useState(defaultName);\n    const [selectedManager, setSelectedManager] = useState(defaultSelectedManager);\n    const [reason, setReason] = useState(defaultReason);\n    const [formStatus, setFormStatus] = useState('');\n\n\n    const onChangeSelect = (event) => {\n        setSelectedManager(event.target.value);\n    };\n\n    const onChangeReason = (event) => {\n        setReason(event.target.value);\n    };\n\n    const onChangeName = (event) => {\n        setName(event.target.value);\n    }\n\n    const onSubmitForm = (event) => {\n        event.preventDefault();\n        if (type === \"clients\") {\n            if (!name || !selectedManager || !reason) {\n                setFormStatus('alert');\n                return;\n            }\n        } else {\n            if (!name) {\n                setFormStatus('alert');\n                return;\n            }\n        }\n        const array = list.map((value) => {\n            return value;\n        });\n\n        if (action === 'change') {\n            array.map((value, index) => {\n                if (id !== -1 && index === id) {\n                    value.name = name;\n                    value.shelfId = Number(selectedManager);\n                    value.description = reason\n                }\n                return value;\n            })\n        } else {\n            array.push({\n                shelfId: Number(selectedManager),\n                name: name,\n                description: reason,\n            });\n        }\n\n        if (action !== 'change') {\n            setList(array, 'add');\n        } else {\n            setList(array);\n        }\n\n        setFormStatus('success');\n        if (action !== 'change') {\n            setName('');\n            setSelectedManager('');\n            setReason('');\n        }\n    };\n\n    return (\n        <form onSubmit={onSubmitForm}>\n            <Input\n                title={\"Имя\"}\n                value={name}\n                onChange={onChangeName}\n            />\n            <Input\n                value={reason}\n                title={\"Назначение товара\"}\n                onChange={onChangeReason}\n            />\n            { type === 'clients' && (\n                <Select\n                    title=\"Менеджер для обзвона\"\n                    value={selectedManager}\n                    options={options.map((value) => {\n                        return value.name;\n                    })}\n                    placeholder={\"Выбери имя\"}\n                    onChange={onChangeSelect}\n                />\n            )}\n            <Button className={'Form-Submit'} submit={true} type=\"action\">{(action === 'change') ? 'Изменить' : 'Добавить'}</Button>\n            <Link to={\"/\"}><Button className={'Form-Back'}>Назад</Button></Link>\n        </form>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}